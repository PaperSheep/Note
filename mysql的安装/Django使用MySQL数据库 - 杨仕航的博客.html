<!DOCTYPE html>
<!-- saved from url=(0027)http://yshblog.com/blog/194 -->
<html lang="zh"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <!--百度收录标识-->
    <meta name="baidu-site-verification" content="ocAh7mV3PU">
    <title>
    Django使用MySQL数据库&nbsp;-&nbsp;杨仕航的博客
</title>
    <!--全局样式-->
    <link rel="stylesheet" type="text/css" href="./Django使用MySQL数据库 - 杨仕航的博客_files/all-2.0.1.css">
    <!--使用bootstrap框架-->
    <link rel="stylesheet" href="./Django使用MySQL数据库 - 杨仕航的博客_files/bootstrap.min.css">
    <script src="./Django使用MySQL数据库 - 杨仕航的博客_files/jquery-1.11.3.min.js.下载"></script>
    <script src="./Django使用MySQL数据库 - 杨仕航的博客_files/bootstrap.min.js.下载"></script>
    <!--百度收录自动提交-->
    <script src="./Django使用MySQL数据库 - 杨仕航的博客_files/push.js.下载"></script>

    <!--其他-->
    <link rel="shortcut icon" href="http://yshblog.com/static/media/favicon.ico">
    <script src="./Django使用MySQL数据库 - 杨仕航的博客_files/jquery.cookie.js.下载"></script>
    <!--IE html5支持-->
    <!--[if lt IE 9]>
        <script src="/static/js/html5shiv.js"></script>
    <![endif]-->
    
    <link rel="stylesheet" type="text/css" href="./Django使用MySQL数据库 - 杨仕航的博客_files/blog.css">
    
    <meta name="keywords" content="mysqlclient,时区,Django2.0,MySQL,Django">
    <link rel="stylesheet" href="./Django使用MySQL数据库 - 杨仕航的博客_files/github_ex.css" type="text/css">
    <script type="text/javascript" src="./Django使用MySQL数据库 - 杨仕航的博客_files/prettify.js.下载"></script>

    <link rel="stylesheet" type="text/css" href="./Django使用MySQL数据库 - 杨仕航的博客_files/shCoreDefault.css">
    <script type="text/javascript" src="./Django使用MySQL数据库 - 杨仕航的博客_files/shCore.js.下载"></script>
    <link rel="stylesheet" href="./Django使用MySQL数据库 - 杨仕航的博客_files/comment-2.0.2.css" type="text/css">

    <!--emojione v2.1.1 使用bootstrap的cdn-->
    <link rel="stylesheet" type="text/css" href="./Django使用MySQL数据库 - 杨仕航的博客_files/emojione.sprites.css">
    <script type="text/javascript" src="./Django使用MySQL数据库 - 杨仕航的博客_files/emojione.min.js.下载"></script>

    <!--emojionearea-->
    <link rel="stylesheet" type="text/css" href="./Django使用MySQL数据库 - 杨仕航的博客_files/emojionearea-2.1.3.min.css">
    <script type="text/javascript" src="./Django使用MySQL数据库 - 杨仕航的博客_files/emojionearea-2.1.3.min.js.下载"></script>


</head>

<body>
    
        
            
            
                <div class="navbar navbar-default navbar-fixed-top" role="navigation">   
                    <div class="navbar-header">
                        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#example-navbar-collapse">
                            <span class="sr-only">切换导航</span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                         </button>
                        <a class="navbar-brand" href="http://yshblog.com/">杨仕航的博客</a>
                    </div>
                    
                    <div class="collapse navbar-collapse" id="example-navbar-collapse">
                        <ul class="nav navbar-nav">
                            <li class="">
                                <a href="http://yshblog.com/">
                                    <span class="glyphicon glyphicon-home"></span> 首页
                                </a>
                            </li>
                            <li class="active">
                                <a href="http://yshblog.com/blog/">
                                    <span class="glyphicon glyphicon-pencil"></span> 博客
                                </a>
                            </li>
                            <li class="">
                                <a href="http://yshblog.com/subject/">
                                    <span class="glyphicon glyphicon-file"></span> 专题
                                </a>
                            </li>
                            <li class="">
                                <a href="http://yshblog.com/tutorial/">
                                    <span class="glyphicon glyphicon-book"></span> 教程
                                </a>
                            </li>
                        </ul>
                        
                        <form action="http://yshblog.com/blog/" class="navbar-form navbar-right">
                            <input name="wd" type="text" placeholder="搜索博文" class="form-control">
                            <button type="submit">
                                <span class="glyphicon glyphicon-search"></span>
                            </button>
                        </form>

                        <ul id="user_part" class="nav navbar-nav navbar-right">
                            
                                <li><a href="http://yshblog.com/user/login_page">登录/注册</a></li>
                            
                        </ul>
                    </div>
                </div>
            

            
                
            
        

        <div class="container">
            
        <div class="col-md-9 col-xs-12">
            
    <div class="panel panel-default">
        <div class="panel-heading">
            <div class="blog_header">
                <h3>Django使用MySQL数据库</h3>

                <ul>
                    <li>发布时间：2018年7月9日 23:41</li>
                    <li>作者：杨仕航</li>
                    
                </ul>
                <span class="clearfix"></span>
                <ul>
                    <li>分类标签：
                        
                            <a href="http://yshblog.com/blog/?tag=8" target="_blank">Django</a>          
                        
                    </li>
                    <li>
                        
                        阅读(5802)
                    </li>
                    <li>
                        
                        
                        评论(2)
                    </li>
                </ul>
            </div>
        </div>

        <div class="panel-body">
            <div class="blog_content">
                
                <p>我们在学习和开发Django的时候，一般是使用SQLite作为数据库。在正式讲网站部署上线是用MySQL数据库比较多。MySQL支持高并发的访问，而且相对于SQLite，MySQL性能更好。下面讲讲如何在Django下安装和使用MySQL。</p><p><br></p><h3><strong>1、下载MySQL</strong></h3><p>打开<a href="https://dev.mysql.com/downloads/mysql/" target="_blank">MySQL Community Server</a>下载页面，这里我下载Windows最新版本的zip包，如下图所示。<br></p><p><img src="./Django使用MySQL数据库 - 杨仕航的博客_files/20180709182049115.png" title="20180709/20180709182049115.png" alt="20180709/20180709182049115.png" data-action="zoom"></p><p>这里我用8.0的版本，官方说它要比5.7的版本快。若你之前使用的是5.7版本，照旧使用5.7也行。</p><p><br></p><h3><strong>2、安装MySQL</strong></h3><p>下载完成之后，解压zip包，再把整个解压之后的结果放到C盘（其他盘也可以）。打开这个MySQL文件夹，里面的文件如下图所示：</p><p><img src="./Django使用MySQL数据库 - 杨仕航的博客_files/20180709222205166.png" title="20180709/20180709222205166.png" alt="20180709/20180709222205166.png" data-action="zoom"></p><p><br></p><h3><strong>3、配置MySQL</strong></h3><p>这里MySQL的安装目录为C:\mysql-8.0.11-winx64，记住该路径，等下我们配置的时候需要用到。</p><p>在该安装目录下，新建一个文件叫my.ini。打开该文件，并写入如下内容：</p><pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><span class="pun">[</span><span class="pln">mysqld</span><span class="pun">]</span></li><li class="L1"><span class="com">#&nbsp;设置mysql的安装目录，我们实际存放MySQL的目录</span></li><li class="L2"><span class="pln">basedir</span><span class="pun">=</span><span class="pln">C</span><span class="pun">:/</span><span class="pln">mysql</span><span class="pun">-</span><span class="lit">8.0</span><span class="pun">.</span><span class="lit">11</span><span class="pun">-</span><span class="pln">winx64</span></li><li class="L3"><span class="com">#&nbsp;设置mysql数据库的数据的存放目录</span></li><li class="L4"><span class="pln">datadir</span><span class="pun">=</span><span class="pln">C</span><span class="pun">:</span><span class="str">/mysql-8.0.11-winx64/</span><span class="pln">data</span></li><li class="L5"><span class="com">#&nbsp;设置默认使用的端口</span></li><li class="L6"><span class="pln">port</span><span class="pun">=</span><span class="lit">3306</span></li><li class="L7"><span class="com">#&nbsp;允许最大连接数</span></li><li class="L8"><span class="pln">max_connections</span><span class="pun">=</span><span class="lit">200</span></li><li class="L9"><span class="com">#&nbsp;允许连接失败的次数。这是为了防止有人试图攻击数据库</span></li><li class="L0"><span class="pln">max_connect_errors</span><span class="pun">=</span><span class="lit">10</span></li><li class="L1"><span class="com">#&nbsp;服务端使用的字符集</span></li><li class="L2"><span class="pln">character</span><span class="pun">-</span><span class="kwd">set</span><span class="pun">-</span><span class="pln">server</span><span class="pun">=</span><span class="pln">utf8mb4</span></li><li class="L3"><span class="com">#&nbsp;数据库字符集对应一些排序等规则使用的字符集</span></li><li class="L4"><span class="pln">collation</span><span class="pun">-</span><span class="pln">server</span><span class="pun">=</span><span class="pln">utf8mb4_general_ci</span></li><li class="L5"><span class="com">#&nbsp;创建新表时将使用的默认存储引擎</span></li><li class="L6"><span class="kwd">default</span><span class="pun">-</span><span class="pln">storage</span><span class="pun">-</span><span class="pln">engine</span><span class="pun">=</span><span class="pln">INNODB</span></li><li class="L7"><span class="com">#&nbsp;默认使用“mysql_native_password”插件作为认证加密方式</span></li><li class="L8"><span class="com">#&nbsp;MySQL8.0默认认证加密方式为caching_sha2_password</span></li><li class="L9"><span class="pln">default_authentication_plugin</span><span class="pun">=</span><span class="pln">mysql_native_password</span></li><li class="L0"><span class="pln">&nbsp;</span></li><li class="L1"><span class="pun">[</span><span class="pln">mysql</span><span class="pun">]</span></li><li class="L2"><span class="com">#&nbsp;设置mysql客户端默认字符集</span></li><li class="L3"><span class="kwd">default</span><span class="pun">-</span><span class="pln">character</span><span class="pun">-</span><span class="kwd">set</span><span class="pun">=</span><span class="pln">utf8mb4</span></li><li class="L4"><span class="pln">&nbsp;</span></li><li class="L5"><span class="pun">[</span><span class="pln">client</span><span class="pun">]</span></li><li class="L6"><span class="kwd">default</span><span class="pun">-</span><span class="pln">character</span><span class="pun">-</span><span class="kwd">set</span><span class="pun">=</span><span class="pln">utf8mb4</span></li><li class="L7"><span class="pln">port</span><span class="pun">=</span><span class="lit">3306</span></li></ol></pre><p><br></p><p>其中，要注意几个配置：</p><p>1、配置路径要注意斜杠的写法，要么写"\\"，要么写"/"；</p><p>2、数据库数据存放的目录需要确保文件夹存在，所以我们需要手动在我们指定的目录创建一个data文件夹；</p><p>3、MySQL8.0的默认认证加密方式和之前版本不同，为了兼容，设置为mysql_native_password。</p><p>更多配置可以参考<a href="https://dev.mysql.com/doc/refman/8.0/en/server-configuration-defaults.html" target="_blank">MySQL的文档</a>。</p><p><br></p><h3><strong>4、把MySQL的bin目录加入环境变量</strong></h3><p>为了方便使用命令，把MySQL的bin目录的路径加入系统环境变量Path中。</p><p>我们现在MySQL安装路径为C:\mysql-8.0.11-winx64，则bin目录的路径为C:\mysql-8.0.11-winx64\bin。记住该路径，根据你具体情况设置。</p><p>右键我的电脑，选择“属性”--&gt;“环境变量”。</p><p><img src="./Django使用MySQL数据库 - 杨仕航的博客_files/20180709224948605.png" title="20180709/20180709224948605.png" alt="20180709/20180709224948605.png" data-action="zoom"></p><p><br></p><p>找到“Path”这一项，双击打开编辑。光标定位到末尾，输入一个英文状态下的分号，再粘贴bin目录的路径进去，再保存即可。</p><p><img src="./Django使用MySQL数据库 - 杨仕航的博客_files/20180709225217608.png" title="20180709/20180709225217608.png" alt="20180709/20180709225217608.png" data-action="zoom"></p><p><br></p><p>设置好之后，后面我们可以直接在cmd直接使用MySQL的相关命令。</p><p><br></p><h3><strong>5、初始化MySQL</strong><br></h3><p>打开cmd，快捷键“win+R”，输入cmd再回车，即可打开cmd。</p><p>执行初始化命令，该命令会创建一个密码为空的root用户。</p><pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><span class="pln">mysqld&nbsp;</span><span class="pun">--</span><span class="pln">initialize</span><span class="pun">-</span><span class="pln">insecure&nbsp;</span><span class="pun">--</span><span class="pln">user</span><span class="pun">=</span><span class="pln">mysql&nbsp;</span><span class="pun">--</span><span class="pln">console</span></li></ol></pre><p><br></p><p>执行初始化命令成功之后，再执行下面的命令，安装mysql服务：</p><pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><span class="pln">mysqld&nbsp;</span><span class="pun">--</span><span class="pln">install</span></li></ol></pre><p><br></p><p>安装服务成功之后，启动服务：</p><pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><span class="pln">net&nbsp;start&nbsp;mysql</span></li></ol></pre><p><br></p><p>这样，mysql服务就启动了。</p><p>ps：若你想删除mysql服务可以执行“sc delete mysql”命令。</p><p><br></p><h3><strong>6、修改root用户的密码</strong></h3><p>上面步骤成功之后，可以在cmd输入如下命令进入MySQL：</p><pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><span class="pln">mysql&nbsp;</span><span class="pun">-</span><span class="pln">u&nbsp;root&nbsp;</span><span class="pun">-</span><span class="pln">p</span></li></ol></pre><p><br></p><p>-u root&nbsp;是指定root用户登录，-p&nbsp;是要求输入密码。刚刚初始化创建的密码为空，要求输入密码的时候，直接回车即可。成功登录进去，即可看到如下界面：</p><p><img src="./Django使用MySQL数据库 - 杨仕航的博客_files/20180709230105780.png" title="20180709/20180709230105780.png" alt="20180709/20180709230105780.png" data-action="zoom"></p><p><br></p><p>输入如下SQL语句，修改root用户的密码：<br></p><pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><span class="pln">alter&nbsp;user&nbsp;</span><span class="str">'root'</span><span class="pun">@</span><span class="str">'localhost'</span><span class="pln">&nbsp;identified&nbsp;</span><span class="kwd">by</span><span class="pln">&nbsp;</span><span class="str">'你的密码'</span><span class="pun">;</span></li></ol></pre><p><br></p><h3><strong>7、为Django项目创建数据库</strong></h3><p>Django项目有自己的数据库，我们需要在MySQL中创建一个数据库给Django使用。登录MySQL后，输入如下SQL语句创建数据库：</p><pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><span class="pln">CREATE&nbsp;DATABASE&nbsp;</span><span class="pun">你的数据库名称</span><span class="pln">&nbsp;DEFAULT&nbsp;CHARSET</span><span class="pun">=</span><span class="pln">utf8&nbsp;DEFAULT&nbsp;COLLATE&nbsp;utf8_unicode_ci</span><span class="pun">;</span></li></ol></pre><p><br></p><p>ps：这里的字符集用utf8mb4和规则用utf8mb4_unicode_ci都可以。记得输入你的数据库名称哦~</p><p><br></p><h3><strong>8、为Django专门管理该项目数据库的MySQL用户</strong></h3><p>在这里，我不建议使用root用户直接管理数据库。为了安全考虑，我们需要创建一个用户专门管理我们Django项目的数据库。</p><p>在MySQL内输入如下SQL语句创建用户：</p><pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><span class="pln">CREATE&nbsp;USER&nbsp;</span><span class="str">'你的用户名'</span><span class="pun">@</span><span class="str">'localhost'</span><span class="pln">&nbsp;IDENTIFIED&nbsp;BY&nbsp;</span><span class="str">'你的密码'</span><span class="pun">;</span></li></ol></pre><p><br></p><p>接下，再把刚刚创建的数据库的管理权限给予刚刚创建的MySQL用户：</p><pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><span class="pln">GRANT&nbsp;ALL&nbsp;PRIVILEGES&nbsp;ON&nbsp;</span><span class="pun">你的数据库名.*</span><span class="pln">&nbsp;TO&nbsp;</span><span class="str">'你的用户名'</span><span class="pun">@</span><span class="str">'localhost'</span><span class="pun">;</span></li></ol></pre><p><br></p><p>最后，刷新权限：</p><pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><span class="pln">FLUSH&nbsp;PRIVILEGES</span><span class="pun">;</span></li></ol></pre><p><br></p><p>ps：把“你的数据库名”、“你的用户名”和“你的密码”改成你对应的内容哦。</p><p><br></p><h3 style="white-space: normal;"><strong>9、安装mysqlclient</strong></h3><p style="white-space: normal;">Django要使用MySQL的话，需要安装mysqlclient库。</p><p style="white-space: normal;">你可以直接执行pip install mysqlclient命令，进行安装。但这个在windows系统可能会报错，编译不了。</p><p style="white-space: normal;">这种情况，可以用whl包安装该库。打开<a href="https://www.lfd.uci.edu/~gohlke/pythonlibs/#mysqlclient" _src="https://www.lfd.uci.edu/~gohlke/pythonlibs/#mysqlclient">https://www.lfd.uci.edu/~gohlke/pythonlibs/#mysqlclient</a>，下载对应python版本和windows版本的mysqlclient文件。例如我的电脑python是3.6版本，windows是64位，需要下载的版本为带有cp36，win_amd64字样的文件。</p><p style="white-space: normal;"><img src="./Django使用MySQL数据库 - 杨仕航的博客_files/20180709231633359.png" title="20180709/20180709231633359.png" alt="20180709/20180709231633359.png" data-action="zoom"></p><p style="white-space: normal;"><br></p><p style="white-space: normal;">下载完成之后，cmd进入该文件的目录，用pip安装即可（下面用到具体文件名，这个根据看你下载的输入命令）：</p><pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><span class="pln">pip&nbsp;install&nbsp;mysqlclient</span><span class="pun">-</span><span class="lit">1.3</span><span class="pun">.</span><span class="lit">13</span><span class="pun">-</span><span class="pln">cp36</span><span class="pun">-</span><span class="pln">cp36m</span><span class="pun">-</span><span class="pln">win_amd64</span><span class="pun">.</span><span class="pln">whl</span></li></ol></pre><p style="white-space: normal;"><br></p><h3><strong>10、修改Django数据库配置</strong></h3><p>打开你的Django项目的settings.py文件，找到DATABASES的配置。我们之前的SQLite配置如下：</p><p><img src="./Django使用MySQL数据库 - 杨仕航的博客_files/20180709231056477.png" title="20180709/20180709231056477.png" alt="20180709/20180709231056477.png" data-action="zoom"></p><p><br></p><p>现在将其改成：</p><pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><span class="pln">DATABASES&nbsp;</span><span class="pun">=</span><span class="pln">&nbsp;</span><span class="pun">{</span></li><li class="L1"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="str">'default'</span><span class="pun">:</span><span class="pln">&nbsp;</span><span class="pun">{</span></li><li class="L2"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="str">'ENGINE'</span><span class="pun">:</span><span class="pln">&nbsp;</span><span class="str">'django.db.backends.mysql'</span><span class="pun">,</span></li><li class="L3"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="str">'NAME'</span><span class="pun">:</span><span class="pln">&nbsp;</span><span class="str">'你的数据库名'</span><span class="pun">,</span></li><li class="L4"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="str">'USER'</span><span class="pun">:</span><span class="pln">&nbsp;</span><span class="str">'你的MySQL用户名'</span><span class="pun">,</span></li><li class="L5"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="str">'PASSWORD'</span><span class="pun">:</span><span class="pln">&nbsp;</span><span class="str">'你的密码'</span><span class="pun">,</span></li><li class="L6"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="str">'HOST'</span><span class="pun">:</span><span class="pln">&nbsp;</span><span class="str">'localhost'</span><span class="pun">,</span></li><li class="L7"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="str">'PORT'</span><span class="pun">:</span><span class="pln">&nbsp;</span><span class="str">'3306'</span><span class="pun">,</span></li><li class="L8"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">}</span></li><li class="L9"><span class="pun">}</span></li></ol></pre><p><br></p><p>ps：把上面那些“你的。。。”对应改一下。</p><p><br></p><h3><strong>11、用数据库迁移文件创建数据库的表</strong></h3><p>之前我们开发的时候，多少会生成一些数据库迁移文件。没有的话，用python manage.py makemigrations生成一下。</p><p>用如下命令应用迁移文件，这样数据库中的表也跟着创建。</p><pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><span class="pln">python&nbsp;manage</span><span class="pun">.</span><span class="pln">py&nbsp;migrate</span></li></ol></pre><p><br></p><h3><strong>12、把SQLite数据导入到MySQL中</strong></h3><p>如果我们之前开发的数据有用或者想搬到MySQL数据库中，我们需要把数据迁移过去。<br></p><p>数据从一个数据库搬到另外一个数据库，只需要两个步骤。旧数据库导出数据，新数据库导入数据。</p><p><br></p><p>1）SQLite导出数据</p><p>先将Django的数据库配置改回来：</p><pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><span class="pln">DATABASES&nbsp;</span><span class="pun">=</span><span class="pln">&nbsp;</span><span class="pun">{</span></li><li class="L1"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="str">'default'</span><span class="pun">:</span><span class="pln">&nbsp;</span><span class="pun">{</span></li><li class="L2"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="str">'ENGINE'</span><span class="pun">:</span><span class="pln">&nbsp;</span><span class="str">'django.db.backends.sqlite3'</span><span class="pun">,</span></li><li class="L3"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="str">'NAME'</span><span class="pun">:</span><span class="pln">&nbsp;os</span><span class="pun">.</span><span class="pln">path</span><span class="pun">.</span><span class="pln">join</span><span class="pun">(</span><span class="pln">BASE_DIR</span><span class="pun">,</span><span class="pln">&nbsp;</span><span class="str">'db.sqlite3'</span><span class="pun">),</span></li><li class="L4"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">}</span></li><li class="L5"><span class="pun">}</span></li></ol></pre><p><br></p><p>然后，在cmd执行导出命令：</p><pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><span class="pln">python&nbsp;manage</span><span class="pun">.</span><span class="pln">py&nbsp;dumpdata&nbsp;</span><span class="pun">&gt;</span><span class="pln">&nbsp;data</span><span class="pun">.</span><span class="pln">json</span></li></ol></pre><p><br></p><p>这样就将数据导出到Django项目根目录下的data.json文件。</p><p><br></p><p>2）MySQL导入数据</p><p>同样，先将Django的数据库配置改为MySQL的：</p><pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><span class="pln">DATABASES&nbsp;</span><span class="pun">=</span><span class="pln">&nbsp;</span><span class="pun">{</span></li><li class="L1"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="str">'default'</span><span class="pun">:</span><span class="pln">&nbsp;</span><span class="pun">{</span></li><li class="L2"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="str">'ENGINE'</span><span class="pun">:</span><span class="pln">&nbsp;</span><span class="str">'django.db.backends.mysql'</span><span class="pun">,</span></li><li class="L3"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="str">'NAME'</span><span class="pun">:</span><span class="pln">&nbsp;</span><span class="str">'你的数据库名'</span><span class="pun">,</span></li><li class="L4"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="str">'USER'</span><span class="pun">:</span><span class="pln">&nbsp;</span><span class="str">'你的MySQL用户名'</span><span class="pun">,</span></li><li class="L5"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="str">'PASSWORD'</span><span class="pun">:</span><span class="pln">&nbsp;</span><span class="str">'你的密码'</span><span class="pun">,</span></li><li class="L6"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="str">'HOST'</span><span class="pun">:</span><span class="pln">&nbsp;</span><span class="str">'localhost'</span><span class="pun">,</span></li><li class="L7"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="str">'PORT'</span><span class="pun">:</span><span class="pln">&nbsp;</span><span class="str">'3306'</span><span class="pun">,</span></li><li class="L8"><span class="pln">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="pun">}</span></li><li class="L9"><span class="pun">}</span></li></ol></pre><p><br></p><p>然后，在cmd执行导入命令：</p><pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><span class="pln">python&nbsp;manage</span><span class="pun">.</span><span class="pln">py&nbsp;loaddata&nbsp;data</span><span class="pun">.</span><span class="pln">json</span></li></ol></pre><p><br></p><p>这里需要等一下，而且可能会出错。注意出错的时候所报的错误信息。如果提示有重复主键，那需要先删掉数据。这些数据是在给MySQL数据库应用迁移文件的时候产生的，一般是content_type相关的表。</p><p>进入到MySQL，执行如下的SQL语句：</p><pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><span class="kwd">use</span><span class="pln">&nbsp;</span><span class="pun">你的数据库名;</span></li><li class="L1"><span class="kwd">delete</span><span class="pln">&nbsp;</span><span class="kwd">from</span><span class="pln">&nbsp;auth_permission</span><span class="pun">;</span></li><li class="L2"><span class="kwd">delete</span><span class="pln">&nbsp;</span><span class="kwd">from</span><span class="pln">&nbsp;django_content_type</span><span class="pun">;</span></li></ol></pre><p><br></p><p>删除数据之后，再执行一次导入命令即可。基本上，导入不了数据都是MySQL存在数据导致的。</p><p><br></p><h3><strong>其他注意事项：加载时区表</strong></h3><p>另外，有可能所安装的MySQL没有加载时区表。这个可能会导致filter对日期的查询有问题。<a href="https://docs.djangoproject.com/en/2.0/ref/databases/#time-zone-definitions" target="_blank">Django官方文档</a>也指出这个问题。MySQL官网也有对应处理方法：<a href="https://dev.mysql.com/doc/refman/8.0/en/mysql-tzinfo-to-sql.html" target="_blank">加载时区表</a>。</p><p>Linux/Mac解决方法都很简单。windows系统要先下载一个sql文件：<a href="https://downloads.mysql.com/general/timezone_2018e_posix_sql.zip" target="_blank" textvalue="timezone_2018e_posix_sql.zip">timezone_2018e_posix_sql.zip</a>。</p><p>下载完成之后，解压得到一个sql文件，再执行cmd命令导入该文件即可：</p><pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><span class="pln">mysql&nbsp;</span><span class="pun">-</span><span class="pln">u&nbsp;root&nbsp;</span><span class="pun">-</span><span class="pln">p&nbsp;mysql&nbsp;</span><span class="pun">&lt;</span><span class="pln">&nbsp;timezone_posix</span><span class="pun">.</span><span class="pln">sql</span></li></ol></pre><p><br></p><p>另外，本篇博客有对应的视频教程：<a href="https://www.bilibili.com/video/av26392907/" target="_blank" textvalue="【Django2.0教程】36.部署准备（二）：MySQL">【Django2.0教程】36.部署准备（二）：MySQL</a> 欢迎围观~~</p>
                <!-- JiaThis Button -->
                <div class="share_btns">
                    <p>(原创博文，转载请注明来自 <a href="http://yshblog.com/">杨仕航的博客</a>！本文链接：<a href="http://yshblog.com/blog/194">http://yshblog.com/blog/194</a>)</p>
                    <p>若对你有帮助，不妨扫一扫右侧的<a href="http://yshblog.com/blog/sponsor" target="_blank">二维码</a>打赏支持我 ^_^</p>
                    <div class="jiathis_style" style="margin-left: 2em;">
                        <span class="jiathis_txt">分享到：</span>
                        <a class="jiathis_button_tsina"></a>
                        <a class="jiathis_button_tqq"></a>
                        <a class="jiathis_button_weixin"></a>
                        <a class="jiathis_button_cqq"></a>
                        <a class="jiathis_button_qzone"></a>
                        <a class="jiathis_button_douban"></a>
                        <a class="jiathis_button_fb"></a>
                        <span class="clearfix"></span>
                    </div>
                </div>

                <p>
                    
                        上一篇：没有了
                    
                </p>
                <p>
                    
                        <a href="http://yshblog.com/blog/193">下一篇：django-ckeditor后台富文本编辑器</a>
                    
                </p>

                
            </div>
        </div>
    </div>

    <!--评论列表-->
    <div class="panel panel-default">
        <div class="panel-heading">
            <h4>评论列表</h4>
            <button id="jump_to_comment" class="btn btn-info comment_title_btn">我要评论</button>
        </div>

        <div id="comments_list" class="panel-body">
            
            
                智慧如你，不想发表一下意见吗？
            
        </div>
    </div>

    <!--评论框-->
    <div class="panel panel-default">
        <div class="panel-heading">
            <h4 id="comment_title">新的评论</h4>
            <button id="reply_cancel" class="btn btn-warning comment_title_btn" style="display:none">取消回复</button>
            <p id="reply_text_pre" style="display:none"></p>
        </div>

        <div class="panel-body">
            <div class="comments_nav">
                
                <form class="form-horizontal" action="http://yshblog.com/blog/comments/post/" method="post" id="comment_form">
                    <input type="hidden" name="csrfmiddlewaretoken" value="7jn9MBjGS39heUONteIt5kOMmrRPZXeQ">
                    <input id="id_object_pk" name="object_pk" type="hidden" value="194">
                    <input id="id_content_type" name="content_type" type="hidden" value="blog.blog">
                    <input id="id_timestamp" name="timestamp" type="hidden" value="1552042415">
                    
                    
                    <input id="id_security_hash" maxlength="40" name="security_hash" type="hidden" value="e8ac25509e0e4731dcdde43ee5c6598aa96abf75">
                    <input type="hidden" name="next" value="/blog/194">
                    <input type="hidden" name="src_url" value="http://yshblog.com/blog/194">                 
                    <input id="reply_to" type="hidden" name="reply_to" value="0">
                    <input id="root_id" type="hidden" name="root_id" value="0">
                    <input id="reply_name" type="hidden" name="reply_name" value="">

                    <div class="row">
                        <div class="col-md-12">
                            <textarea class="input-xlarge comment_text" id="id_comment" name="comment" placeholder="为了防止垃圾评论，需要登录，才能评论哦~" style="display: none;"></textarea><div class="input-xlarge comment_text emojionearea" role="application"><div class="emojionearea-editor" contenteditable="true" placeholder="为了防止垃圾评论，需要登录，才能评论哦~" tabindex="0" dir="ltr" spellcheck="false" autocomplete="off" autocorrect="off" autocapitalize="off"></div><div class="emojionearea-filters"><div class="emojionearea-filters-scroll"><i class="emojionearea-filter" data-filter="people"><i class="emojione-1f60b"></i></i><i class="emojionearea-filter" data-filter="nature"><i class="emojione-1f433"></i></i><i class="emojionearea-filter" data-filter="food_drink"><i class="emojione-1f352"></i></i><i class="emojionearea-filter" data-filter="celebration"><i class="emojione-1f389"></i></i><i class="emojionearea-filter" data-filter="activity"><i class="emojione-1f3c6"></i></i><i class="emojionearea-filter" data-filter="travel"><i class="emojione-1f680"></i></i><i class="emojionearea-filter" data-filter="objects_symbols"><i class="emojione-1f587"></i></i><i class="emojionearea-filter" data-filter="flags"><i class="emojione-1f6a9"></i></i></div><i class="emojionearea-filter-arrow-left"></i><i class="emojionearea-filter-arrow-right"></i></div><div class="emojionearea-tabs ea-hidden"><div class="emojionearea-tab emojionearea-tab-people ea-hidden"></div><div class="emojionearea-tab emojionearea-tab-nature ea-hidden"></div><div class="emojionearea-tab emojionearea-tab-food_drink ea-hidden"></div><div class="emojionearea-tab emojionearea-tab-celebration ea-hidden"></div><div class="emojionearea-tab emojionearea-tab-activity ea-hidden"></div><div class="emojionearea-tab emojionearea-tab-travel ea-hidden"></div><div class="emojionearea-tab emojionearea-tab-objects_symbols ea-hidden"></div><div class="emojionearea-tab emojionearea-tab-flags ea-hidden"></div></div></div>

                            <!--如果你在该字段中输入任何内容，你的评论就会被视为垃圾评论-->
                            <input type="text" style="display:none;" id="id_honeypot" name="honeypot">
                        </div>
                    </div>

                    <div class="row">
                          <div class="form-actions comment_button">
                            <span id="tip_text"></span>
                            <input class="btn btn-info" id="submit_btn" type="submit" name="submit" value="提交">
                            <botton class="btn btn-default" id="reset_btn">清空</botton>
                          </div>
                    </div>
                 </form>
            </div>
        </div>
    </div>

        </div>

        
        <div class="col-md-3 col-xs-12 blog-border">
            
            
    <div class="side-list">
        <h4><span class="glyphicon glyphicon-pushpin"></span> 广告合作</h4>
        <a href="https://zqyhdm.com/" target="_blank"><img src="./Django使用MySQL数据库 - 杨仕航的博客_files/ad.jpg" style="width: 100%; border-radius: 0.2em;"></a>
    </div>


            <div class="side-list">
                <h4>
                    <span class="glyphicon glyphicon-book"></span>
                    随机推荐
                </h4>
                <ul>
                    
                        <li>
                            <a href="http://yshblog.com/blog/49" target="_blank">Python写个猜数字玩一玩</a>
                        </li>
                    
                        <li>
                            <a href="http://yshblog.com/blog/92" target="_blank">Python按位运算</a>
                        </li>
                    
                        <li>
                            <a href="http://yshblog.com/blog/57" target="_blank">Python多线程使用win32com注意事项</a>
                        </li>
                    
                        <li>
                            <a href="http://yshblog.com/blog/51" target="_blank">我的网站搭建(第20天) 修改昵称和密码</a>
                        </li>
                    
                        <li>
                            <a href="http://yshblog.com/blog/175" target="_blank">Excel常用的字符串公式</a>
                        </li>
                    
                        <li>
                            <a href="http://yshblog.com/blog/115" target="_blank">Django的views.py文件拆分</a>
                        </li>
                    
                        <li>
                            <a href="http://yshblog.com/blog/76" target="_blank">Access中ADO和DAO like查询的区别</a>
                        </li>
                    
                        <li>
                            <a href="http://yshblog.com/blog/20" target="_blank">Access建表规范总结(3)：主子表拆分</a>
                        </li>
                    
                        <li>
                            <a href="http://yshblog.com/blog/35" target="_blank">C#类、窗体和程序实现单例模式</a>
                        </li>
                    
                        <li>
                            <a href="http://yshblog.com/blog/11" target="_blank">Excel公式和vba根据日期获取中文星期几的方法</a>
                        </li>
                    
                </ul>  
            </div>

            <div class="side-list">
                <h4>
                    <span class="glyphicon glyphicon-book"></span>
                    猜你喜欢
                </h4>
                <ul id="like_blogs_list">
                    
                <li><a href="http://yshblog.com/blog/193" target="_blank">django-ckeditor后台富文本编辑器</a></li><li><a href="http://yshblog.com/blog/64" target="_blank">我的网站搭建(第26天) 阅读统计分析</a></li><li><a href="http://yshblog.com/blog/81" target="_blank">Django处理同名url参数</a></li><li><a href="http://yshblog.com/blog/80" target="_blank">Django集成UEditor (封装成应用)</a></li><li><a href="http://yshblog.com/blog/77" target="_blank">我的网站搭建(第32天) OAuth功能整合</a></li><li><a href="http://yshblog.com/blog/5" target="_blank">我的网站搭建(第5天) Django评论库</a></li><li><a href="http://yshblog.com/blog/71" target="_blank">我的网站搭建(第31天) 优化登录和注册页面</a></li><li><a href="http://yshblog.com/blog/70" target="_blank">我的网站搭建(第30天) 第三方登录：Github</a></li><li><a href="http://yshblog.com/blog/69" target="_blank">我的网站搭建(第29天) 多线程异步发送邮件</a></li><li><a href="http://yshblog.com/blog/68" target="_blank">我的网站搭建(第28天) 第三方登录：新浪微博</a></li></ul>  
            </div>  
        </div>

        <script type="text/javascript">
            //获取猜测列表
            $.ajax({
                type:"GET",
                url:"/blog/get_like_blogs",
                cache:false,
                dataType:'json',
                success:function(data){
                    $("#like_blogs_list").children().remove(); //移除子节点
                    if(data['code']==0){
                        for (var i = 0; i < data['items'].length; i++) {
                            var url = data['items'][i]['url'];
                            var caption = data['items'][i]['caption'];
                            var str = '<li><a href="'+url+'" target=_blank>'+caption+'</a></li>';
                            $("#like_blogs_list").append(str);
                        };
                    }else{
                        $("#like_blogs_list").append('<li>'+data['message']+'</li>');
                    }
                },
                error:function(XMLHttpRequest, textStatus, errorThrown){
                    $("#like_blogs_list").children().remove(); //移除子节点
                    $("#like_blogs_list").append('<li>猜测卡壳了，猜不了T_T</li>');
                }
            });
        </script>

        </div>
    

    
        
        <div id="footer" class="page-bottom">
            
            <div class="container">
                <div class="col-sm-4 hidden-xs">
                    <div class="content">
                        <h4 class="title">关于本站</h4>
                        <p>1、基于Django+Bootstrap开发</p>
                        <p>2、主要发表本人的技术原创博客</p>
                        <p>3、本站于 2015-12-01 开始建站</p>
                    </div>
                </div>

                <div class="col-sm-4">
                    <div class="content">
                        <h4 class="title">建议反馈</h4>
                        <p>1、可在相应的博文底下评论</p>
                        <p>2、发邮件到2872402050@qq.com</p>
                    </div>
                </div>

                <div class="col-sm-4 hidden-xs">
                    <div class="content">
                        <h4 class="title">友情链接</h4>
                        <p><a href="https://zqyhdm.com/" target="_blank">再敲一行代码</a></p>
                        <p><a href="https://jq.qq.com/?_wv=1027&amp;k=5lSm3eD" title="QQ群：701914136（点击加群）" target="_blank">QQ群：701914136</a></p>
                    </div>
                </div>
            </div>

            <div class="copyright">
                <span>Welcome to visit my website © Haddy Yang</span>
            </div>
        </div>
    

    <a id="scrolltop" class="gotop" href="javascript:void(0)" title="返回顶部" style="display: none;"></a>

    <!--打赏-->
    <link type="text/css" rel="stylesheet" href="./Django使用MySQL数据库 - 杨仕航的博客_files/myRewards.css">
    <script>
        window.tctipConfig = {
            //最上面的文字
            headText: "欢迎打赏支持我 ^_^",
            //侧边栏文本
            siderText: "公告 & 打赏",
            //侧边栏文本高度调整
            siderTextTop: "-72px",
            //侧边栏背景颜色
            siderBgcolor: "#323d45",
            //整个侧边栏的高度设置
            siderTop:"118px",
            //底部文字
            buttomText:"了解更多",
            //底部文字链接
            buttomLink:"https://github.com/haddyyang/tctip",
            //显示列表
            list:{
                notice: {name:"公告栏", className:"myR-on",
                         icon: "/static/img/qr_icon/tip.png",  
                         text: '获取公告中...'
                        },
                alipay: {name:"支付宝", desc: "用支付宝给“仕航”打赏", 
                         icon: "/static/img/qr_icon/alipay.png", 
                         qrimg: "/static/img/qr_code/alipay.jpg"
                        },
                weixin: {name:"微信", desc: "用微信给“仕航”打赏", 
                         icon: "/static/img/qr_icon/weixin.png",
                         qrimg: "/static/img/qr_code/weixin.jpg"
                        }    
            }
        };
    </script>
    <script src="./Django使用MySQL数据库 - 杨仕航的博客_files/tctip.min.js.下载"></script><div id="myRewards" class="myRewards" style="top: 118px;"><a class="btn-myRewards" href="javascript:;" style="margin-top: -72px;"><p class="sider-text" style="background-color: rgb(50, 61, 69);">公告 &amp; 打赏</p></a><div class="myRewards-main"><a class="sider-close" title="收起" href="javascript:;">&gt;&gt;</a><h1 class="myR-h">欢迎打赏支持我 ^_^</h1><div class="myRewardsbox"><div class="myRewards-list"><ul class="not-full"><li class="myR-on"><a href="javascript:;">公告栏<img class="png" src="./Django使用MySQL数据库 - 杨仕航的博客_files/tip.png" alt="公告栏"></a></li><li class="undefined"><a href="javascript:;">支付宝<img class="png" src="./Django使用MySQL数据库 - 杨仕航的博客_files/alipay.png" alt="支付宝"></a></li><li class="undefined"><a href="javascript:;">微信<img class="png" src="./Django使用MySQL数据库 - 杨仕航的博客_files/weixin.png" alt="微信"></a></li></ul></div><div class="myRewards-detail"><div class="myRewards-ubox"><p class="myRewards-code-tit">最新公告</p><div class="myRewards-code"><p class="myRewards-text">我网站有个bug，总是莫名其妙自动删除评论。努力修复中 T_T<p style="text-align:right;margin-top:0.5em;">2018-04-02</p></p></div></div></div></div><p class="myR-bot"><a href="https://github.com/haddyyang/tctip" target="_blank">了解更多</a></p></div></div>

    <script type="text/javascript">
        $(function(){
            //滚动事件
            $(window).scroll(function(){
                var top=$(window).scrollTop();
                var navbar = $(".navbar-fixed-top");

                if(top==0){
                    $(".navbar-fixed-top").removeClass("navbar-down");
                }else{
                    $(".navbar-fixed-top").addClass("navbar-down");
                }

                if(top>350){
                    $("#scrolltop").fadeIn();
                }else{
                    $("#scrolltop").fadeOut();
                }
            });

            //点击返回头部效果
            $("#scrolltop").click(function(){
                $("html,body").animate({scrollTop:0});
            });

            //窗体改变大小事件
            $(window).resize(function(){
                //正文高度
                var body_height = $(document.body).outerHeight(true);

                //底部元素高度
                var bottom_height = $("#footer").outerHeight(true);

                //浏览器页面高度
                var window_height = $(window).height();
                
                //判断并调整底部元素的样式
                if($("#footer").hasClass('page-bottom-abs')){
                    if(body_height + bottom_height >= window_height){
                        $("#footer").removeClass('page-bottom-abs');
                    }
                }else{
                    if(body_height < window_height){
                        $("#footer").addClass('page-bottom-abs');
                    }
                }
            });

            //页面加载时，模拟触发一下resize事件
            $(window).trigger('resize');

            //检查登录状态和获取公告
            var user_menu = '<li><a href="/user/login_page">登录/注册</a></li>';
            $.ajax({
                type:"GET",
                url:"/user/check_is_login",
                cache:false,
                dataType:'json',
                success:function(data){
                    var notice;
                    if(data['code']=='0'){
                        user_menu = data['user_menu'];
                        notice = data['notice'];
                    }else{
                        
                        notice='暂无公告';
                    };

                    //$("#user_part").html(user_menu);
                    $('.myRewards-text').html(notice);
                    tctipConfig.list.notice.text=notice;
                },
                error:function(XMLHttpRequest, textStatus, errorThrown){
                    $("#user_part").html(user_menu);
                }
            });
        });
    </script>
    
    
    <script type="text/javascript">
        $(document).ready(function() {
            //代码高亮
            prettyPrint();

            //评论提交
            $('#comment_form').submit(function() {
                if ($("#id_honeypot").val().length!=0) {alert("Stop!垃圾评论");return false;};
                if ($("#id_comment").val().length==0) {
                    $("#tip_text").text('您还没写任何评论内容');
                    $(".emojionearea-editor").focus();
                    $("body,html").animate({scrollTop: $("#comment_title").offset().top - 90}, 100);
                    return false;
                };

                update_comment($('#comment_form').serialize());
                return false;
            });
            //清空按钮
            $('#reset_btn').click(function(){
                var eoa = $("#id_comment")[0].emojioneArea;
                eoa.setText('');
                $('#tip_text').text('');
            });

            //提交评论或回复
            function update_comment(form_data){
                $.ajax({
                    type: "POST",
                    data: form_data,
                    url: "/blog/comments/post/",
                    cache: false,
                    dataType: "json",
                    success: function(json, textStatus) {
                        if(json['success']){
                            window.location.reload();
                        }else{
                            if(json['code']==501){
                                $("#tip_text").text('您尚未登录，请先登录才能评论');
                            }else if(json['code']==502){
                                $("#tip_text").text('您尚未激活，请先激活您的账户才能评论');
                            }else{
                                $("#tip_text").text('评论出错，请刷新重试\n'+json['message']);
                                window.console.debug(json);
                            }
                        }
                    },
                    error: function (XMLHttpRequest, textStatus, errorThrown) {
                        alert("评论出错\n请检查是否登录了或者刷新试试\n" + errorThrown);
                    }
                });
            }

            //页面打开定位到评论位置
            if(window.location.hash!=""){
                obj = document.getElementsByName(window.location.hash.split("#")[1])[0];
                var $obj = $(obj);
                $("body,html").animate({
                  scrollTop: $obj.offset().top - 70
                }, 1000);
            };

            //使用emojioneArea
            $("#id_comment").emojioneArea();

            //对评论内容的emoji转化
            $(".comment_content p, .reply_content p").each(function(){
                //$(this).html(emojione.toImage($(this).text()));
                var value = $(this).text();
                var code = $('<div/>').text(value).html(); //html转义
                $(this).html(emojione.toImage(code));
            });
        });

        //我要评论-按钮
        $("#jump_to_comment").click(function(){
            $(".emojionearea-editor").focus();
            $("body,html").animate({scrollTop: $("#comment_title").offset().top - 90}, 100);
        });

        //取消回复-按钮
        $("#reply_cancel").click(function(){
            //设置相关数据
            $("#reply_to").val('0');
            $("#root_id").val('0');
            $("#reply_name").val("");

            //调整页面显示
            $("#comment_title").text("新的评论");
            $("#reply_text_pre").hide();
            $("#reply_cancel").hide();
        });

        //回复按钮点击事件
        function reply_click(obj){
            obj = $(obj);

            //设置回复信息
            $("#reply_to").val(obj.attr("role"));
            $("#root_id").val(obj.attr("root"));
            $("#reply_name").val(obj.attr("base"));
            
            //显示回复的相关内容
            $("#comment_title").text("回复：" + obj.attr("base"));
            $("#reply_text_pre").html($("#comment_"+obj.attr("role")).html()); //显示要回复的评论内容
            $("#reply_text_pre").show();
            $("#reply_cancel").show();

            //评论库获得焦点
            $(".emojionearea-editor").focus();
            $("body,html").animate({scrollTop: $("#comment_title").offset().top - 90}, 100);
            return false;
        }

        //分享按钮
        var jiathis_config = {data_track_clickback:'true'};

        //给正文中的图片添加缩放属性
        $(".blog_content img").attr("data-action", "zoom");
    </script>

    <!--图片缩放-->
    <link rel="stylesheet" type="text/css" href="./Django使用MySQL数据库 - 杨仕航的博客_files/zoom.css">
    <script type="text/javascript" src="./Django使用MySQL数据库 - 杨仕航的博客_files/zoom.min.js.下载"></script>

    <!--分享按钮-->
    <script type="text/javascript" src="./Django使用MySQL数据库 - 杨仕航的博客_files/jia.js.下载" charset="utf-8"></script>



</body></html>